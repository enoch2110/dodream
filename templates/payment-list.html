{% extends "_layouts/base.html" %}
{% load static from staticfiles %}

{% block content_parent %}
    <div class="page-aside app filters">
        <div>
            <div class="content">
                <button class="navbar-toggle" data-target=".app-nav" data-toggle="collapse" type="button">
                    <span class="fa fa-chevron-down"></span>
                </button>
                <h2 class="page-title">Filters</h2>
                <p class="description">Payment Filter</p>

            </div>
            <div class="app-nav collapse">
                <form action="" method="get">
                    <div class="content">
                        <div class="form-group">
                            <label class="control-label">By date:</label>
                            <div class="input-group date datetime" data-min-view="2" data-date-format="yyyy-mm-dd">
                                <input class="form-control" size="16" type="text" name="date" value="{{ request.GET.date }}" readonly>
                                <span class="input-group-addon btn btn-primary"><span class="glyphicon glyphicon-th"></span></span>
                            </div>
                        </div>

{#                        <div class="form-group">#}
{#                            <label class="control-label">By price:</label>#}
{#                            <p>Values between <strong id="price1"></strong> and <strong id="price2"></strong></p>#}
{#                            <input id="price-range" class="bslider form-control" name="price" type="text" data-slider-tooltip="hide" data-slider-value="{% if request.GET.price %}[{{ request.GET.price }}]{% else %}[0, 500]{% endif %}" data-slider-step="5" data-slider-max="1000" data-slider-min="10" value="" />#}
{#                        </div>#}
                        <div class="form-group">
                            <button class="btn btn-primary" style="width: 100%;">필터링</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="container-fluid" id="pcont">
        <div class="main-app">
            <div class="head">
                <h3>Search</h3>
                <input type="text" class="form-control"  placeholder="Search product..." />
            </div>
            <div class="filters">
                <input id="check-all" type="checkbox" name="checkall" />
                <span>Select All</span>
                <div class="btn-group pull-right">
                    <button class="btn btn-sm btn-flat btn-default" type="button"><i class="fa fa-angle-left"></i></button>
                    <button class="btn btn-sm btn-flat btn-default" type="button"><i class="fa fa-angle-right"></i></button>
                </div>
                <div class="btn-group pull-right">
                    <button data-toggle="dropdown" class="btn btn-sm btn-flat btn-default dropdown-toggle" type="button">
                        Order by <span class="caret"></span>
                    </button>
                    <ul role="menu" class="dropdown-menu">
                        <li><a href="#">Date</a></li>
                        <li><a href="#">From</a></li>
                        <li><a href="#">Subject</a></li>
                        <li class="divider"></li>
                        <li><a href="#">Size</a></li>
                    </ul>
                </div>
            </div>

            <div class="items products">
                {% for payment in payments %}
                    <div class="item">
                        <div><input type="checkbox" name="c[]" /> </div>
                        <div>
                            <div class="pull-right">
                                <span class="date price">{{ payment.amount }}</span>
                                <div></div>
                                <a class="btn btn-default btn-xs" href="#" data-original-title="Open" data-toggle="tooltip"><i class="fa fa-file"></i></a>
                                <a class="btn btn-primary btn-xs" href="#" data-original-title="Edit" data-toggle="tooltip"><i class="fa fa-pencil"></i></a>
                                <a class="btn btn-danger btn-xs" href="{% url "payment-delete" payment.id %}" data-original-title="Remove" data-toggle="tooltip"><i class="fa fa-times"></i></a>
                            </div>
                            <h4 class="from">{{ payment.student.name }}</h4>
                            <p class="msg">{{ payment.datetime }}</p>
                            <p class="msg">{{ payment.receipt_number }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script type="text/javascript">
        $(document).ready(function(){
            //initialize the javascript
            //App.init();
            $('input').iCheck({
                checkboxClass: 'icheckbox_square-blue checkbox',
                radioClass: 'iradio_square-blue'
            });

            $("#check-all").on('ifChanged',function(){
                var checkboxes = $(".items").find(':checkbox');
                if($(this).is(':checked')) {
                    checkboxes.iCheck('check');
                } else {
                    checkboxes.iCheck('uncheck');
                }
            });

            /*Slider update range*/
            $("#price-range").slider().on("slide",function(e){
                $("#price1").html("$" + e.value[0]);
                $("#price2").html("$" + e.value[1]);
            });
            var price_range = eval($("#price-range").attr("data-slider-value"));
            $("#price1").html("$" + price_range[0]);
            $("#price2").html("$" + price_range[1]);
        });
    </script>
{% endblock %}